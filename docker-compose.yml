services:
  calculator-mcp:
    build: ./fastmcp
    container_name: calculator-mcp
    command: python mcp_pipe.py calculator.py
    env_file:
      - .env          
    volumes:
      - ./fastmcp/mcp_config.json:/app/mcp_config.json
      - ./fastmcp/calculator.py:/app/calculator.py
    restart: unless-stopped
  perplexity-gemini-mcp: 
    build: ./fastmcp
    container_name: perplexity-gemini-mcp
    command: python mcp_pipe.py perplexity_tool.py
    env_file:
      - .env          
    volumes:
      - ./fastmcp/mcp_config.json:/app/mcp_config.json
      - ./fastmcp/perplexity_tool.py:/app/perplexity_tool.py
      - ./fastmcp/gemini_summary.py:/app/gemini_summary.py
    restart: unless-stopped
  
  getvideo-mcp:
    build: ./fastmcp
    container_name: getvideo-mcp
    command: python mcp_pipe.py invidious_mcp.py 
    env_file:
      - .env          
    volumes:
      - ./fastmcp/mcp_config.json:/app/mcp_config.json
      - ./fastmcp/invidious_mcp.py:/app/invidious_mcp.py
    restart: unless-stopped

  xiaozhi-proxy-invidious:
    # Local build of Invidious proxy for Xiaozhi
    build: ./xiaozhi-proxy-invidious  
    container_name: xiaozhi-proxy-invidious
    env_file:
      - ./.env 
    environment:
      - PYTHONUNBUFFERED=1
    ports:
      - "5006:5006" 
    restart: unless-stopped
    volumes:
      - ./xiaozhi-proxy-invidious/music_server.py:/app/music_server.py
